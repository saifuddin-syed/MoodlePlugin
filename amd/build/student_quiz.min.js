define("local_automation/student_quiz",["jquery"],(function($){return{init:function(courseid){console.log("student_quiz.js loaded"),console.log("Course ID received:",courseid),courseid?$((function(){const quizContainer=$("#quizContainer"),unitContainer=$("#unitContainer");let totalTime=0;$.get("http://127.0.0.1:8000/topics",(function(data){console.log("Topics response:",data),unitContainer.empty(),data.topics.forEach((function(topic){const unitBlock=$('<div style="margin-bottom:10px;">'),unitCheckbox=$('\n                                <label>\n                                    <input type="checkbox" class="unit-checkbox" value="'.concat(topic.unit,'">\n                                    <strong>').concat(topic.unit,"</strong>\n                                </label>\n                            "));unitBlock.append(unitCheckbox),topic.sections.forEach((function(sectionObj){const sectionCheckbox=$('\n                                    <div style="margin-left:20px;">\n                                        <label>\n                                            <input type="checkbox"\n                                                   class="section-checkbox"\n                                                   data-unit="'.concat(topic.unit,'"\n                                                   value="').concat(sectionObj.section,'">\n                                            ').concat(sectionObj.section," - ").concat(sectionObj.title,"\n                                        </label>\n                                    </div>\n                                "));unitBlock.append(sectionCheckbox)})),unitContainer.append(unitBlock)}))})),$(document).on("change",".unit-checkbox",(function(){const unit=$(this).val(),isChecked=$(this).is(":checked");$('.section-checkbox[data-unit="'.concat(unit,'"]')).prop("checked",isChecked)})),$(document).on("change",".section-checkbox",(function(){const unit=$(this).data("unit"),totalSections=$('.section-checkbox[data-unit="'.concat(unit,'"]')).length;$('.section-checkbox[data-unit="'.concat(unit,'"]:checked')).length===totalSections?$('.unit-checkbox[value="'.concat(unit,'"]')).prop("checked",!0):$('.unit-checkbox[value="'.concat(unit,'"]')).prop("checked",!1)})),$("#generateQuizBtn").off("click").on("click",(function(){let selectedUnits=[],selectedSections=[];if($(".unit-checkbox:checked").each((function(){selectedUnits.push($(this).val())})),$(".section-checkbox:checked").each((function(){selectedSections.push({unit:$(this).data("unit"),section:$(this).val()})})),0===selectedUnits.length&&0===selectedSections.length)return void alert("Select at least one unit or section.");if(selectedUnits.length>3)return void alert("Maximum 3 units allowed.");const numQuestions=parseInt($("#questionCount").val()),difficulty=$("#difficulty").val();if(!numQuestions||numQuestions<=0)return void alert("Enter valid number of questions.");let timePerQuestion=60;"medium"===difficulty&&(timePerQuestion=120),"hard"===difficulty&&(timePerQuestion=150),totalTime=numQuestions*timePerQuestion,quizContainer.html("<p>Generating quiz...</p>"),$.ajax({url:"http://127.0.0.1:8000/generate-quiz",method:"POST",contentType:"application/json",data:JSON.stringify({units:selectedUnits,sections:selectedSections,num_questions:numQuestions,difficulty:difficulty}),success:function(data){if(console.log("Quiz API response:",data),!data||!0!==data.ok)return void quizContainer.html("<p>"+(data.error||"Quiz generation failed.")+"</p>");if(!Array.isArray(data.questions)||0===data.questions.length)return void quizContainer.html("<p>No questions generated.</p>");const form=$("<form>",{method:"POST",action:M.cfg.wwwroot+"/local/automation/student_quiz_attempt.php"});form.append('<input type="hidden" name="sesskey" value="'.concat(M.cfg.sesskey,'">')),form.append('<input type="hidden" name="courseid" value="'.concat(courseid,'">')),form.append('<input type="hidden" name="difficulty" value="'.concat(difficulty,'">')),form.append('<input type="hidden" name="totalquestions" value="'.concat(data.questions.length,'">')),form.append('<input type="hidden" name="quizjson" value=\''.concat(JSON.stringify(data.questions),"'>")),selectedUnits.forEach((function(u){form.append('<input type="hidden" name="topics[]" value="'.concat(u,'">'))})),$("body").append(form),form.submit()},error:function(){quizContainer.html("<p>Server error.</p>")}})}))})):console.error("Course ID not received in JS")}}}));

//# sourceMappingURL=student_quiz.min.js.map